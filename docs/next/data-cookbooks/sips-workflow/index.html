<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Science Investigator-led Processing Systems (SIPS) · Cumulus Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Science Investigator-led Processing Systems (SIPS)"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Science Investigator-led Processing Systems (SIPS) · Cumulus Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://nasa.github.io/cumulus/"/><meta property="og:description" content="# Science Investigator-led Processing Systems (SIPS)"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/cumulus/undefined"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/cumulus/js/scrollSpy.js"></script><link rel="stylesheet" href="/cumulus/css/main.css"/><script src="/cumulus/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/cumulus/"><h2 class="headerTitle">Cumulus Documentation</h2></a><a href="/cumulus/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://nasa.github.io/cumulus-api" target="_self">API Docs</a></li><li class=""><a href="/cumulus/docs/next/cumulus-docs-readme" target="_self">Developer Docs</a></li><li class="siteNavGroupActive"><a href="/cumulus/docs/next/data-cookbooks/about-cookbooks" target="_self">Data-Cookbooks</a></li><li class=""><a href="/cumulus/docs/next/operator-docs/about-operator-docs" target="_self">Operator Docs</a></li><li class=""><a href="/cumulus/docs/next/team" target="_self">Team</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Cookbooks</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">About Cookbooks<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/about-cookbooks">About Cookbooks</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/setup">Data Cookbooks Setup</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Cookbooks<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/hello-world">HelloWorld Workflow</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/sns">SNS Notification in Workflows</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/sips-workflow">Science Investigator-led Processing Systems (SIPS)</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/cnm-workflow">CNM Workflow</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/error-handling">Error Handling in Workflows</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/choice-states">Choice States</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/cloudwatch-retention">Cloudwatch Retention</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/browse-generation">Ingest Browse Generation</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/tracking-files">Tracking Ancillary Files</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/run-tasks-in-lambda-or-docker">Run Step Function Tasks in Lambda or Docker</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/next/data-cookbooks/throttling-queued-executions">Throttling queued executions</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="science-investigator-led-processing-systems-sips"></a><a href="#science-investigator-led-processing-systems-sips" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Science Investigator-led Processing Systems (SIPS)</h1>
<p>The Cumulus ingest workflow supports the SIPS workflow. In the following document, we'll discuss what a SIPS workflow is and how to set one up in a Cumulus instance.</p>
<p>In this document, we assume the user already has a provider endpoint configured and ready with some data to ingest. We'll be using an S3 provider and ingesting from a MOD09GQ collection.</p>
<h2><a class="anchor" aria-hidden="true" id="setup"></a><a href="#setup" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup</h2>
<h3><a class="anchor" aria-hidden="true" id="provider"></a><a href="#provider" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Provider</h3>
<p>We need to have a <a href="/cumulus/docs/next/data-cookbooks/setup#providers">provider</a> from whom data can be ingested. Our provider is an S3 provider hosted in the <code>cumulus-test-internal</code> bucket.</p>
<p><img src="/cumulus/docs/assets/sips-provider.png" alt="Screenshot of Cumulus dashboard screen for configuring an S3 provider"></p>
<h3><a class="anchor" aria-hidden="true" id="collection"></a><a href="#collection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Collection</h3>
<p>We need to build a collection. Details on collections can be found <a href="/cumulus/docs/next/data-cookbooks/setup#collections">here</a>. The following collection will have <code>MOD09GQ</code> as a collection name, <code>006</code> as a version, and is configured to pull PDRs from <code>${bucket}/cumulus-test-data/pdrs</code> in S3 (where <code>${bucket}</code> is configured in the provider).</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"queriedAt"</span>: <span class="hljs-string">"2018-08-03T16:44:25.919Z"</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"MOD09GQ"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"006"</span>,
  <span class="hljs-attr">"process"</span>: <span class="hljs-string">"modis"</span>,
  <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD09GQ.A2017025.h21v00.006.2017034065104.hdf"</span>,
  <span class="hljs-attr">"dataType"</span>: <span class="hljs-string">"MOD09GQ"</span>,
  <span class="hljs-attr">"granuleIdExtraction"</span>: <span class="hljs-string">"(MOD09GQ\\..*)(\\.hdf|\\.cmr|_ndvi\\.jpg)"</span>,
  <span class="hljs-attr">"createdAt"</span>: <span class="hljs-number">1531324194001</span>,
  <span class="hljs-attr">"granuleId"</span>: <span class="hljs-string">"^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}$"</span>,
  <span class="hljs-attr">"provider_path"</span>: <span class="hljs-string">"cumulus-test-data/pdrs"</span>,
  <span class="hljs-attr">"files"</span>: [
    {
      <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"protected"</span>,
      <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}\\.hdf$"</span>,
      <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD09GQ.A2017025.h21v00.006.2017034065104.hdf"</span>,
      <span class="hljs-attr">"url_path"</span>: <span class="hljs-string">"{cmrMetadata.Granule.Collection.ShortName}/{extractYear(cmrMetadata.Granule.Temporal.RangeDateTime.BeginningDateTime)}/{substring(file.name, 0, 3)}"</span>
    },
    {
      <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"private"</span>,
      <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}\\.hdf\\.met$"</span>,
      <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD09GQ.A2017025.h21v00.006.2017034065104.hdf.met"</span>
    },
    {
      <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"protected-2"</span>,
      <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}\\.cmr\\.xml$"</span>,
      <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD09GQ.A2017025.h21v00.006.2017034065104.cmr.xml"</span>
    },
    {
      <span class="hljs-attr">"bucket"</span>: <span class="hljs-string">"public"</span>,
      <span class="hljs-attr">"regex"</span>: <span class="hljs-string">"^MOD09GQ\\.A[\\d]{7}\\.[\\S]{6}\\.006\\.[\\d]{13}_ndvi\\.jpg$"</span>,
      <span class="hljs-attr">"sampleFileName"</span>: <span class="hljs-string">"MOD09GQ.A2017025.h21v00.006.2017034065104_ndvi.jpg"</span>
    }
  ],
  <span class="hljs-attr">"duplicateHandling"</span>: <span class="hljs-string">"replace"</span>,
  <span class="hljs-attr">"updatedAt"</span>: <span class="hljs-number">1533313794693</span>,
  <span class="hljs-attr">"url_path"</span>: <span class="hljs-string">"{cmrMetadata.Granule.Collection.ShortName}/{substring(file.name, 0, 3)}"</span>,
  <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1533313798525</span>,
  <span class="hljs-attr">"stats"</span>: {
    <span class="hljs-attr">"running"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"completed"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"failed"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">"total"</span>: <span class="hljs-number">2</span>
  }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="rule"></a><a href="#rule" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rule</h3>
<p>Finally, let's create a <a href="/cumulus/docs/next/data-cookbooks/setup#rules">rule</a>. In this example we're just going to create a <code>onetime</code> throw-away rule that will be easy to test with. This rule will kick off the <code>DiscoverAndQueuePdrs</code> workflow, which is the beginning of a Cumulus SIPS workflow.</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"s3_provider_rule"</span>,
  <span class="hljs-attr">"workflow"</span>: <span class="hljs-string">"DiscoverAndQueuePdrs"</span>,
  <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"s3_provider"</span>,
  <span class="hljs-attr">"collection"</span>: {
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"MOD09GQ"</span>,
    <span class="hljs-attr">"version"</span>: <span class="hljs-string">"006"</span>
  },
  <span class="hljs-attr">"rule"</span>: {
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"onetime"</span>
  },
  <span class="hljs-attr">"state"</span>: <span class="hljs-string">"ENABLED"</span>,
  <span class="hljs-attr">"tags"</span>: [
    <span class="hljs-string">"test"</span>
  ]
}
</code></pre>
<p><strong>Note:</strong> A list of configured workflows exists under the &quot;Workflows&quot; in the navigation bar on the Cumulus dashboard. Additionally, one can find a list of executions and their respective status in the &quot;Executions&quot; tab in the navigation bar.</p>
<h2><a class="anchor" aria-hidden="true" id="discoverandqueuepdrs-workflow"></a><a href="#discoverandqueuepdrs-workflow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DiscoverAndQueuePdrs Workflow</h2>
<p>This workflow will discover PDRs and queue them to be processed. Duplicate PDRs will be dealt with according to the configured duplicate handling setting in the collection.   The lambdas below are included in the <code>cumulus</code> terraform module for use in your workflows:</p>
<ol>
<li>DiscoverPdrs - <a href="https://github.com/nasa/cumulus/tree/master/tasks/discover-pdrs">source</a></li>
<li>QueuePdrs - <a href="https://github.com/nasa/cumulus/tree/master/tasks/queue-pdrs">source</a></li>
</ol>
<p><img src="/cumulus/docs/assets/sips-discover-and-queue-pdrs-execution.png" alt="Screenshot of execution graph for discover and queue PDRs workflow in the AWS Step Functions console"></p>
<p><em>An example workflow module configuration can be viewed in the Cumulus source for the <a href="https://github.com/nasa/cumulus/blob/master/example/cumulus-tf/discover_and_queue_pdrs_workflow.tf">discover_and_queue_pdrs_workflow</a>.</em></p>
<p><em><strong>Please note:</strong> To use this example workflow module as a template for a new workflow in your deployment the <code>source</code> key for the workflow module would need to point to a release of the cumulus-workflow (terraform-aws-cumulus-workflow.zip) module on our <a href="https://github.com/nasa/cumulus/releases">release</a> page, as all of the provided Cumulus workflows are internally self-referential.</em></p>
<h2><a class="anchor" aria-hidden="true" id="parsepdr-workflow"></a><a href="#parsepdr-workflow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ParsePdr Workflow</h2>
<p>The ParsePdr workflow will parse a PDR, queue the specified granules (duplicates are handled according to the duplicate handling setting) and periodically check the status of those queued granules. This workflow will not succeed until all the granules included in the PDR are successfully ingested. If one of those fails, the ParsePdr workflow will fail. <strong>NOTE</strong> that ParsePdr may spin up multiple IngestGranule workflows in parallel, depending on the granules included in the PDR.</p>
<p>The lambdas below are included in the <code>cumulus</code> terraform module for use in your workflows:</p>
<ol>
<li>ParsePdr - <a href="https://github.com/nasa/cumulus/tree/master/tasks/parse-pdr">source</a></li>
<li>QueueGranules - <a href="https://github.com/nasa/cumulus/tree/master/tasks/queue-granules">source</a></li>
<li>CheckStatus - <a href="https://github.com/nasa/cumulus/tree/master/tasks/pdr-status-check">source</a></li>
</ol>
<p><img src="/cumulus/docs/assets/sips-parse-pdr.png" alt="Screenshot of execution graph for SIPS Parse PDR workflow in AWS Step Functions console"></p>
<p><em>An example workflow module configuration can be viewed in the Cumulus source for the <a href="https://github.com/nasa/cumulus/blob/master/example/cumulus-tf/parse_pdr_workflow.tf">parse_pdr_workflow</a>.</em></p>
<p><em><strong>Please note:</strong> To use this example workflow module as a template for a new workflow in your deployment the <code>source</code> key for the workflow module would need to point to a release of the cumulus-workflow (terraform-aws-cumulus-workflow.zip) module on our <a href="https://github.com/nasa/cumulus/releases">release</a> page, as all of the provided Cumulus workflows are internally self-referential.</em></p>
<h2><a class="anchor" aria-hidden="true" id="ingestgranule-workflow"></a><a href="#ingestgranule-workflow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IngestGranule Workflow</h2>
<p>The IngestGranule workflow processes and ingests a granule and posts the granule metadata to CMR.</p>
<p>The lambdas below are included in the <code>cumulus</code> terraform module for use in your workflows:</p>
<ol>
<li>SyncGranule - <a href="https://github.com/nasa/cumulus/tree/master/tasks/sync-granule">source</a>.</li>
<li>CmrStep - <a href="https://github.com/nasa/cumulus/tree/master/tasks/post-to-cmr">source</a></li>
</ol>
<p>Additionally this workflow requires a processing step you must provide. The ProcessingStep step in the workflow picture below is an example of a custom processing step.</p>
<p><strong>Note:</strong> Using the CmrStep is not required and can be left out of the processing trajectory if desired (for example, in testing situations).</p>
<p><img src="/cumulus/docs/assets/sips-ingest-granule.png" alt="Screenshot of execution graph for SIPS IngestGranule workflow in AWS Step Functions console"></p>
<p><em>An example workflow module configuration can be viewed in the Cumulus source for the <a href="https://github.com/nasa/cumulus/blob/master/example/cumulus-tf/ingest_and_publish_granule_workflow.tf">ingest_and_publish_granule_workflow</a>.</em></p>
<p><em><strong>Please note:</strong> To use this example workflow module as a template for a new workflow in your deployment the <code>source</code> key for the workflow module would need to point to a release of the cumulus-workflow (terraform-aws-cumulus-workflow.zip) module on our <a href="https://github.com/nasa/cumulus/releases">release</a> page, as all of the provided Cumulus workflows are internally self-referential.</em></p>
<h2><a class="anchor" aria-hidden="true" id="summary"></a><a href="#summary" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Summary</h2>
<p>In this cookbook we went over setting up a collection, rule, and provider for a SIPS workflow. Once we had the setup completed, we looked over the Cumulus workflows that participate in parsing PDRs, ingesting and processing granules, and updating CMR.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/cumulus/docs/next/data-cookbooks/sns"><span class="arrow-prev">← </span><span>SNS Notification in Workflows</span></a><a class="docs-next button" href="/cumulus/docs/next/data-cookbooks/cnm-workflow"><span>CNM Workflow</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#setup">Setup</a><ul class="toc-headings"><li><a href="#provider">Provider</a></li><li><a href="#collection">Collection</a></li><li><a href="#rule">Rule</a></li></ul></li><li><a href="#discoverandqueuepdrs-workflow">DiscoverAndQueuePdrs Workflow</a></li><li><a href="#parsepdr-workflow">ParsePdr Workflow</a></li><li><a href="#ingestgranule-workflow">IngestGranule Workflow</a></li><li><a href="#summary">Summary</a></li></ul></nav></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'f7e0be879553661f9043322d119069c8',
                indexName: 'nasa_cumulus',
                inputSelector: '#search_input_react'
              });
            </script></body></html>